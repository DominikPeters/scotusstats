!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MyLibrary=e():t.MyLibrary=e()}(this,(()=>(()=>{var t={947:(t,e,r)=>{var n,o=Object.create,i=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,l=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=(t,e,r)=>e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,g=(t,e)=>{for(var r in e||(e={}))h.call(e,r)&&p(t,r,e[r]);if(f)for(var r of f(e))d.call(e,r)&&p(t,r,e[r]);return t},w=(t,e)=>s(t,u(e)),v=t=>i(t,"__esModule",{value:!0}),y=(t,e,r,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let o of c(e))!h.call(t,o)&&(r||"default"!==o)&&i(t,o,{get:()=>e[o],enumerable:!(n=a(e,o))||n.enumerable});return t},_=(n="undefined"!=typeof WeakMap?new WeakMap:0,(t,e)=>n&&n.get(t)||(e=y(v({}),t,1),n&&n.set(t,e),e)),b={};((t,e)=>{for(var r in e)i(t,r,{get:e[r],enumerable:!0})})(b,{createIndex:()=>z,getSearchClient:()=>E,performSearch:()=>P});var m,j=((t,e)=>y(v(i(null!=t?o(l(t)):{},"default",t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t))(r(64));function O(t){return w(g({objectID:t.id},t),{_highlightResult:{}})}function S(t){let e=Object.keys(t),r={};return e.forEach((e=>{r[e]={},t[e].buckets.forEach((({key:t,doc_count:n})=>{r[e][t]=n}))})),r}function x(t){let e=Object.keys(t),r={};return e.forEach((e=>{t[e].facet_stats&&(r[e]=t[e].facet_stats)})),r}function k(t){return t+1}function A(t,e){let r=new RegExp(/(.+)(:)(.+)/),[,n,,o]=e.match(r);return t[n]?t[n].push(o):t[n]=[o],t}function E(t){return{search:e=>P(e,m||t),searchForFacetValues:()=>{throw new Error("Not implemented")}}}function z(t,e){return m=(0,j.default)(t,e)}function P(t,e){if(e){let r=0,n=t.map((t=>{let n=function(t){let e=t.params.numericFilters,r=t.params.facets,n=t.params.facetFilters,o=t.indexName,i={query:t.params.query,per_page:t.params.hitsPerPage,page:k(t.params.page),indexName:t.indexName,sort:o};if(r&&(i.aggregations=r),e&&e.length>0){let t=function(t){let e=[];return t.map((t=>{let[,r,n,o]=function(t){return t.match(new RegExp(/([^<=!>]+)(<|<=|=|!=|>|>=)(\d+)/))}(t);switch(n){case"<":e.push((t=>t[r]<o));break;case"<=":e.push((t=>t[r]<=o));break;case"=":e.push((t=>t[r]==o));break;case"!=":e.push((t=>t[r]!=o));break;case">":e.push((t=>t[r]>o));break;case">=":e.push((t=>t[r]>=o))}})),e}(e);i.filter=e=>t.every((t=>t(e)))}return n&&n.length>0&&(i.filters=function(t){let e={};if(!Array.isArray(t))throw Error("request.params.facetFilters does not contain an array");return t.forEach((t=>{Array.isArray(t)?t.forEach((t=>{e=A(e,t)})):e=A(e,t)})),e}(n)),i}(t),o=e.search(n);if(r+=o.timings.total,o.data.aggregations){let e={};Object.keys(o.data.aggregations).forEach((r=>{t.params.facets.includes(r)&&(e[r]=o.data.aggregations[r])})),o.data.aggregations=e}return function(t,e,r){let n=Math.ceil(t.pagination.total/t.pagination.per_page);return{hits:t.data.items.map(O),page:t.pagination.page-1,nbPages:n,hitsPerPage:t.pagination.per_page,nbHits:t.pagination.total,processingTimeMS:r,exhaustiveNbHits:!0,query:e,params:"",facets:S(t.data.aggregations),facets_stats:x(t.data.aggregations)}}(o,t.params.query,r)}));return Promise.resolve({results:n})}return null}t.exports=_(b)},64:(t,e,r)=>{t=r.nmd(t);var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")(),s=i.Symbol,a=Object.prototype,u=a.hasOwnProperty,c=a.toString,f=s?s.toStringTag:void 0,l=Object.prototype.toString,h="[object Null]",d="[object Undefined]",p=s?s.toStringTag:void 0;function g(t){return null==t?void 0===t?d:h:p&&p in Object(t)?function(t){var e=u.call(t,f),r=t[f];try{t[f]=void 0;var n=!0}catch(t){}var o=c.call(t);return n&&(e?t[f]=r:delete t[f]),o}(t):function(t){return l.call(t)}(t)}function w(t){return null!=t&&"object"==typeof t}var v="[object Symbol]";function y(t){return"symbol"==typeof t||w(t)&&g(t)==v}function _(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var b=Array.isArray,m=1/0,j=s?s.prototype:void 0,O=j?j.toString:void 0;function S(t){if("string"==typeof t)return t;if(b(t))return _(t,S)+"";if(y(t))return O?O.call(t):"";var e=t+"";return"0"==e&&1/t==-m?"-0":e}function x(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function k(t){return t}var A="[object AsyncFunction]",E="[object Function]",z="[object GeneratorFunction]",P="[object Proxy]";function F(t){if(!x(t))return!1;var e=g(t);return e==E||e==z||e==A||e==P}var M,I=i["__core-js_shared__"],T=(M=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",N=Function.prototype.toString;function $(t){if(null!=t){try{return N.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var W=/^\[object .+?Constructor\]$/,C=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function D(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!x(t)||(e=t,T&&T in e))&&(F(t)?C:W).test($(t));var e}(r)?r:void 0}var R,V,q,U=D(i,"WeakMap"),L=Object.create,B=function(){function t(){}return function(e){if(!x(e))return{};if(L)return L(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),J=Date.now,H=function(){try{var t=D(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),G=H,Y=G?function(t,e){return G(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:k,K=(R=Y,V=0,q=0,function(){var t=J(),e=16-(t-q);if(q=t,e>0){if(++V>=800)return arguments[0]}else V=0;return R.apply(void 0,arguments)});function Q(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function X(t){return t!=t}function Z(t,e){return!(null==t||!t.length)&&function(t,e,r){return e==e?function(t,e,r){for(var n=-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e):function(t,e,r,n){for(var o=t.length,i=-1;++i<o;)if(e(t[i],i,t))return i;return-1}(t,X)}(t,e)>-1}var tt=9007199254740991,et=/^(?:0|[1-9]\d*)$/;function rt(t,e){var r=typeof t;return!!(e=null==e?tt:e)&&("number"==r||"symbol"!=r&&et.test(t))&&t>-1&&t%1==0&&t<e}function nt(t,e,r){"__proto__"==e&&G?G(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function ot(t,e){return t===e||t!=t&&e!=e}var it=Object.prototype.hasOwnProperty;function st(t,e,r){var n=t[e];it.call(t,e)&&ot(n,r)&&(void 0!==r||e in t)||nt(t,e,r)}function at(t,e,r,n){var o=!r;r||(r={});for(var i=-1,s=e.length;++i<s;){var a=e[i],u=n?n(r[a],t[a],a,r,t):void 0;void 0===u&&(u=t[a]),o?nt(r,a,u):st(r,a,u)}return r}var ut=Math.max;function ct(t,e){return K(function(t,e,r){return e=ut(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=ut(n.length-e,0),s=Array(i);++o<i;)s[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=r(s),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,a)}}(t,e,k),t+"")}var ft=9007199254740991;function lt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ft}function ht(t){return null!=t&&lt(t.length)&&!F(t)}function dt(t,e,r){if(!x(r))return!1;var n=typeof e;return!!("number"==n?ht(r)&&rt(e,r.length):"string"==n&&e in r)&&ot(r[e],t)}var pt=Object.prototype;function gt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||pt)}function wt(t){return w(t)&&"[object Arguments]"==g(t)}var vt=Object.prototype,yt=vt.hasOwnProperty,_t=vt.propertyIsEnumerable,bt=wt(function(){return arguments}())?wt:function(t){return w(t)&&yt.call(t,"callee")&&!_t.call(t,"callee")},mt=e&&!e.nodeType&&e,jt=mt&&t&&!t.nodeType&&t,Ot=jt&&jt.exports===mt?i.Buffer:void 0,St=(Ot?Ot.isBuffer:void 0)||function(){return!1},xt={};function kt(t){return function(e){return t(e)}}xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt["[object Arguments]"]=xt["[object Array]"]=xt["[object ArrayBuffer]"]=xt["[object Boolean]"]=xt["[object DataView]"]=xt["[object Date]"]=xt["[object Error]"]=xt["[object Function]"]=xt["[object Map]"]=xt["[object Number]"]=xt["[object Object]"]=xt["[object RegExp]"]=xt["[object Set]"]=xt["[object String]"]=xt["[object WeakMap]"]=!1;var At=e&&!e.nodeType&&e,Et=At&&t&&!t.nodeType&&t,zt=Et&&Et.exports===At&&n.process,Pt=function(){try{return Et&&Et.require&&Et.require("util").types||zt&&zt.binding&&zt.binding("util")}catch(t){}}(),Ft=Pt&&Pt.isTypedArray,Mt=Ft?kt(Ft):function(t){return w(t)&&lt(t.length)&&!!xt[g(t)]},It=Object.prototype.hasOwnProperty;function Tt(t,e){var r=b(t),n=!r&&bt(t),o=!r&&!n&&St(t),i=!r&&!n&&!o&&Mt(t),s=r||n||o||i,a=s?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=a.length;for(var c in t)!e&&!It.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||rt(c,u))||a.push(c);return a}function Nt(t,e){return function(r){return t(e(r))}}var $t=Nt(Object.keys,Object),Wt=Object.prototype.hasOwnProperty;function Ct(t){return ht(t)?Tt(t):function(t){if(!gt(t))return $t(t);var e=[];for(var r in Object(t))Wt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}var Dt=Object.prototype.hasOwnProperty;function Rt(t){return ht(t)?Tt(t,!0):function(t){if(!x(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=gt(t),r=[];for(var n in t)("constructor"!=n||!e&&Dt.call(t,n))&&r.push(n);return r}(t)}var Vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qt=/^\w*$/;function Ut(t,e){if(b(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!y(t))||qt.test(t)||!Vt.test(t)||null!=e&&t in Object(e)}var Lt=D(Object,"create"),Bt=Object.prototype.hasOwnProperty,Jt=Object.prototype.hasOwnProperty;function Ht(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Gt(t,e){for(var r=t.length;r--;)if(ot(t[r][0],e))return r;return-1}Ht.prototype.clear=function(){this.__data__=Lt?Lt(null):{},this.size=0},Ht.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ht.prototype.get=function(t){var e=this.__data__;if(Lt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Bt.call(e,t)?e[t]:void 0},Ht.prototype.has=function(t){var e=this.__data__;return Lt?void 0!==e[t]:Jt.call(e,t)},Ht.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Lt&&void 0===e?"__lodash_hash_undefined__":e,this};var Yt=Array.prototype.splice;function Kt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Kt.prototype.clear=function(){this.__data__=[],this.size=0},Kt.prototype.delete=function(t){var e=this.__data__,r=Gt(e,t);return!(r<0||(r==e.length-1?e.pop():Yt.call(e,r,1),--this.size,0))},Kt.prototype.get=function(t){var e=this.__data__,r=Gt(e,t);return r<0?void 0:e[r][1]},Kt.prototype.has=function(t){return Gt(this.__data__,t)>-1},Kt.prototype.set=function(t,e){var r=this.__data__,n=Gt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var Qt=D(i,"Map");function Xt(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function Zt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function te(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=t.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(te.Cache||Zt),r}Zt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ht,map:new(Qt||Kt),string:new Ht}},Zt.prototype.delete=function(t){var e=Xt(this,t).delete(t);return this.size-=e?1:0,e},Zt.prototype.get=function(t){return Xt(this,t).get(t)},Zt.prototype.has=function(t){return Xt(this,t).has(t)},Zt.prototype.set=function(t,e){var r=Xt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},te.Cache=Zt;var ee,re,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/\\(\\)?/g,ie=(ee=te((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ne,(function(t,r,n,o){e.push(n?o.replace(oe,"$1"):r||t)})),e}),(function(t){return 500===re.size&&re.clear(),t})),re=ee.cache,ee);function se(t,e){return b(t)?t:Ut(t,e)?[t]:ie(function(t){return null==t?"":S(t)}(t))}var ae=1/0;function ue(t){if("string"==typeof t||y(t))return t;var e=t+"";return"0"==e&&1/t==-ae?"-0":e}function ce(t,e){for(var r=0,n=(e=se(e,t)).length;null!=t&&r<n;)t=t[ue(e[r++])];return r&&r==n?t:void 0}function fe(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var le=s?s.isConcatSpreadable:void 0;function he(t){return b(t)||bt(t)||!!(le&&t&&t[le])}function de(t,e,r,n,o){var i=-1,s=t.length;for(r||(r=he),o||(o=[]);++i<s;){var a=t[i];e>0&&r(a)?e>1?de(a,e-1,r,n,o):fe(o,a):n||(o[o.length]=a)}return o}var pe=Nt(Object.getPrototypeOf,Object);function ge(t){var e=this.__data__=new Kt(t);this.size=e.size}ge.prototype.clear=function(){this.__data__=new Kt,this.size=0},ge.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},ge.prototype.get=function(t){return this.__data__.get(t)},ge.prototype.has=function(t){return this.__data__.has(t)},ge.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Kt){var n=r.__data__;if(!Qt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Zt(n)}return r.set(t,e),this.size=r.size,this};var we=e&&!e.nodeType&&e,ve=we&&t&&!t.nodeType&&t,ye=ve&&ve.exports===we?i.Buffer:void 0,_e=ye?ye.allocUnsafe:void 0;function be(){return[]}var me=Object.prototype.propertyIsEnumerable,je=Object.getOwnPropertySymbols,Oe=je?function(t){return null==t?[]:(t=Object(t),function(e,r){for(var n=-1,o=null==e?0:e.length,i=0,s=[];++n<o;){var a=e[n];me.call(t,a)&&(s[i++]=a)}return s}(je(t)))}:be,Se=Oe,xe=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)fe(e,Se(t)),t=pe(t);return e}:be;function ke(t,e,r){var n=e(t);return b(t)?n:fe(n,r(t))}function Ae(t){return ke(t,Ct,Se)}function Ee(t){return ke(t,Rt,xe)}var ze=D(i,"DataView"),Pe=D(i,"Promise"),Fe=D(i,"Set"),Me="[object Map]",Ie="[object Promise]",Te="[object Set]",Ne="[object WeakMap]",$e="[object DataView]",We=$(ze),Ce=$(Qt),De=$(Pe),Re=$(Fe),Ve=$(U),qe=g;(ze&&qe(new ze(new ArrayBuffer(1)))!=$e||Qt&&qe(new Qt)!=Me||Pe&&qe(Pe.resolve())!=Ie||Fe&&qe(new Fe)!=Te||U&&qe(new U)!=Ne)&&(qe=function(t){var e=g(t),r="[object Object]"==e?t.constructor:void 0,n=r?$(r):"";if(n)switch(n){case We:return $e;case Ce:return Me;case De:return Ie;case Re:return Te;case Ve:return Ne}return e});var Ue=qe,Le=Object.prototype.hasOwnProperty,Be=i.Uint8Array;function Je(t){var e=new t.constructor(t.byteLength);return new Be(e).set(new Be(t)),e}var He=/\w*$/,Ge=s?s.prototype:void 0,Ye=Ge?Ge.valueOf:void 0,Ke="[object Boolean]",Qe="[object Date]",Xe="[object Map]",Ze="[object Number]",tr="[object RegExp]",er="[object Set]",rr="[object String]",nr="[object Symbol]",or="[object ArrayBuffer]",ir="[object DataView]",sr="[object Float32Array]",ar="[object Float64Array]",ur="[object Int8Array]",cr="[object Int16Array]",fr="[object Int32Array]",lr="[object Uint8Array]",hr="[object Uint8ClampedArray]",dr="[object Uint16Array]",pr="[object Uint32Array]",gr=Pt&&Pt.isMap,wr=gr?kt(gr):function(t){return w(t)&&"[object Map]"==Ue(t)},vr=Pt&&Pt.isSet,yr=vr?kt(vr):function(t){return w(t)&&"[object Set]"==Ue(t)},_r=1,br=2,mr=4,jr="[object Arguments]",Or="[object Function]",Sr="[object GeneratorFunction]",xr="[object Object]",kr={};function Ar(t,e,r,n,o,i){var s,a=e&_r,u=e&br,c=e&mr;if(r&&(s=o?r(t,n,o,i):r(t)),void 0!==s)return s;if(!x(t))return t;var f=b(t);if(f){if(s=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Le.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!a)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t,s)}else{var l=Ue(t),h=l==Or||l==Sr;if(St(t))return function(t,e){if(e)return t.slice();var r=t.length,n=_e?_e(r):new t.constructor(r);return t.copy(n),n}(t,a);if(l==xr||l==jr||h&&!o){if(s=u||h?{}:function(t){return"function"!=typeof t.constructor||gt(t)?{}:B(pe(t))}(t),!a)return u?function(t,e){return at(t,xe(t),e)}(t,function(t,e){return t&&at(e,Rt(e),t)}(s,t)):function(t,e){return at(t,Se(t),e)}(t,function(t,e){return t&&at(e,Ct(e),t)}(s,t))}else{if(!kr[l])return o?t:{};s=function(t,e,r){var n,o,i=t.constructor;switch(e){case or:return Je(t);case Ke:case Qe:return new i(+t);case ir:return function(t,e){var r=e?Je(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case sr:case ar:case ur:case cr:case fr:case lr:case hr:case dr:case pr:return function(t,e){var r=e?Je(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case Xe:return new i;case Ze:case rr:return new i(t);case tr:return(o=new(n=t).constructor(n.source,He.exec(n))).lastIndex=n.lastIndex,o;case er:return new i;case nr:return Ye?Object(Ye.call(t)):{}}}(t,l,a)}}i||(i=new ge);var d=i.get(t);if(d)return d;i.set(t,s),yr(t)?t.forEach((function(n){s.add(Ar(n,e,r,n,t,i))})):wr(t)&&t.forEach((function(n,o){s.set(o,Ar(n,e,r,o,t,i))}));var p=f?void 0:(c?u?Ee:Ae:u?Rt:Ct)(t);return Q(p||t,(function(n,o){p&&(n=t[o=n]),st(s,o,Ar(n,e,r,o,t,i))})),s}function Er(t){return Ar(t,4)}function zr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Zt;++e<r;)this.add(t[e])}function Pr(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Fr(t,e){return t.has(e)}kr[jr]=kr["[object Array]"]=kr["[object ArrayBuffer]"]=kr["[object DataView]"]=kr["[object Boolean]"]=kr["[object Date]"]=kr["[object Float32Array]"]=kr["[object Float64Array]"]=kr["[object Int8Array]"]=kr["[object Int16Array]"]=kr["[object Int32Array]"]=kr["[object Map]"]=kr["[object Number]"]=kr[xr]=kr["[object RegExp]"]=kr["[object Set]"]=kr["[object String]"]=kr["[object Symbol]"]=kr["[object Uint8Array]"]=kr["[object Uint8ClampedArray]"]=kr["[object Uint16Array]"]=kr["[object Uint32Array]"]=!0,kr["[object Error]"]=kr[Or]=kr["[object WeakMap]"]=!1,zr.prototype.add=zr.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},zr.prototype.has=function(t){return this.__data__.has(t)};var Mr=1,Ir=2;function Tr(t,e,r,n,o,i){var s=r&Mr,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(t),f=i.get(e);if(c&&f)return c==e&&f==t;var l=-1,h=!0,d=r&Ir?new zr:void 0;for(i.set(t,e),i.set(e,t);++l<a;){var p=t[l],g=e[l];if(n)var w=s?n(g,p,l,e,t,i):n(p,g,l,t,e,i);if(void 0!==w){if(w)continue;h=!1;break}if(d){if(!Pr(e,(function(t,e){if(!Fr(d,e)&&(p===t||o(p,t,r,n,i)))return d.push(e)}))){h=!1;break}}else if(p!==g&&!o(p,g,r,n,i)){h=!1;break}}return i.delete(t),i.delete(e),h}function Nr(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function $r(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var Wr=1,Cr=2,Dr="[object Boolean]",Rr="[object Date]",Vr="[object Error]",qr="[object Map]",Ur="[object Number]",Lr="[object RegExp]",Br="[object Set]",Jr="[object String]",Hr="[object Symbol]",Gr="[object ArrayBuffer]",Yr="[object DataView]",Kr=s?s.prototype:void 0,Qr=Kr?Kr.valueOf:void 0,Xr=1,Zr=Object.prototype.hasOwnProperty,tn=1,en="[object Arguments]",rn="[object Array]",nn="[object Object]",on=Object.prototype.hasOwnProperty;function sn(t,e,r,n,o){return t===e||(null==t||null==e||!w(t)&&!w(e)?t!=t&&e!=e:function(t,e,r,n,o,i){var s=b(t),a=b(e),u=s?rn:Ue(t),c=a?rn:Ue(e),f=(u=u==en?nn:u)==nn,l=(c=c==en?nn:c)==nn,h=u==c;if(h&&St(t)){if(!St(e))return!1;s=!0,f=!1}if(h&&!f)return i||(i=new ge),s||Mt(t)?Tr(t,e,r,n,o,i):function(t,e,r,n,o,i,s){switch(r){case Yr:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Gr:return!(t.byteLength!=e.byteLength||!i(new Be(t),new Be(e)));case Dr:case Rr:case Ur:return ot(+t,+e);case Vr:return t.name==e.name&&t.message==e.message;case Lr:case Jr:return t==e+"";case qr:var a=Nr;case Br:if(a||(a=$r),t.size!=e.size&&!(n&Wr))return!1;var u=s.get(t);if(u)return u==e;n|=Cr,s.set(t,e);var c=Tr(a(t),a(e),n,o,i,s);return s.delete(t),c;case Hr:if(Qr)return Qr.call(t)==Qr.call(e)}return!1}(t,e,u,r,n,o,i);if(!(r&tn)){var d=f&&on.call(t,"__wrapped__"),p=l&&on.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,w=p?e.value():e;return i||(i=new ge),o(g,w,r,n,i)}}return!!h&&(i||(i=new ge),function(t,e,r,n,o,i){var s=r&Xr,a=Ae(t),u=a.length;if(u!=Ae(e).length&&!s)return!1;for(var c=u;c--;){var f=a[c];if(!(s?f in e:Zr.call(e,f)))return!1}var l=i.get(t),h=i.get(e);if(l&&h)return l==e&&h==t;var d=!0;i.set(t,e),i.set(e,t);for(var p=s;++c<u;){var g=t[f=a[c]],w=e[f];if(n)var v=s?n(w,g,f,e,t,i):n(g,w,f,t,e,i);if(!(void 0===v?g===w||o(g,w,r,n,i):v)){d=!1;break}p||(p="constructor"==f)}if(d&&!p){var y=t.constructor,_=e.constructor;y==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(d=!1)}return i.delete(t),i.delete(e),d}(t,e,r,n,o,i))}(t,e,r,n,sn,o))}var an=1,un=2;function cn(t){return t==t&&!x(t)}function fn(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}}function ln(t,e){return null!=t&&e in Object(t)}var hn=1,dn=2;function pn(t){return"function"==typeof t?t:null==t?k:"object"==typeof t?b(t)?function(t,e){return Ut(t)&&cn(e)?fn(ue(t),e):function(r){var n=function(t,e,r){var n=null==t?void 0:ce(t,e);return void 0===n?void 0:n}(r,t);return void 0===n&&n===e?function(t,e){return null!=t&&function(t,e,r){for(var n=-1,o=(e=se(e,t)).length,i=!1;++n<o;){var s=ue(e[n]);if(!(i=null!=t&&r(t,s)))break;t=t[s]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&lt(o)&&rt(s,o)&&(b(t)||bt(t))}(t,e,ln)}(r,t):sn(e,n,hn|dn)}}(t[0],t[1]):(o=function(t){for(var e=Ct(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,cn(o)]}return e}(n=t),1==o.length&&o[0][2]?fn(o[0][0],o[0][1]):function(t){return t===n||function(t,e,r,n){var o=r.length,i=o;if(null==t)return!i;for(t=Object(t);o--;){var s=r[o];if(s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var a=(s=r[o])[0],u=t[a],c=s[1];if(s[2]){if(void 0===u&&!(a in t))return!1}else{var f=new ge;if(!sn(c,u,an|un,void 0,f))return!1}}return!0}(t,0,o)}):Ut(e=t)?(r=ue(e),function(t){return null==t?void 0:t[r]}):function(t){return function(e){return ce(e,t)}}(e);var e,r,n,o}var gn=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),s=i.length;s--;){var a=i[++n];if(!1===e(o[a],a,o))break}return t};function wn(t,e){return t&&gn(t,e,Ct)}var vn,yn=(vn=wn,function(t,e){if(null==t)return t;if(!ht(t))return vn(t,e);for(var r=t.length,n=-1,o=Object(t);++n<r&&!1!==e(o[n],n,o););return t});function _n(t,e){var r=-1,n=ht(t)?Array(t.length):[];return yn(t,(function(t,o,i){n[++r]=e(t,o,i)})),n}function bn(t,e){return(b(t)?_:_n)(t,pn(e))}function mn(t,e){return t>e}var jn=Math.min;function On(t){return function(t){return w(t)&&ht(t)}(t)?t:[]}var Sn=ct((function(t){var e=_(t,On);return e.length&&e[0]===t[0]?function(t,e,r){for(var n=Z,o=t[0].length,i=t.length,s=i,a=Array(i),u=1/0,c=[];s--;){var f=t[s];u=jn(f.length,u),a[s]=o>=120&&f.length>=120?new zr(s&&f):void 0}f=t[0];var l=-1,h=a[0];t:for(;++l<o&&c.length<u;){var d=f[l],p=d;if(d=0!==d?d:0,!(h?Fr(h,p):n(c,p,r))){for(s=i;--s;){var g=a[s];if(!(g?Fr(g,p):n(t[s],p,r)))continue t}h&&h.push(p),c.push(d)}}return c}(e):[]})),xn=Sn;function kn(t,e){return t<e}function An(t,e){var r={};return e=pn(e),wn(t,(function(t,n,o){nt(r,n,e(t,n,o))})),r}function En(t,e,r){for(var n=-1,o=t.length;++n<o;){var i=t[n],s=e(i);if(null!=s&&(void 0===a?s==s&&!y(s):r(s,a)))var a=s,u=i}return u}function zn(t,e){return t&&t.length?En(t,pn(e),mn):void 0}function Pn(t,e){for(var r,n=-1,o=t.length;++n<o;){var i=e(t[n]);void 0!==i&&(r=void 0===r?i:r+i)}return r}function Fn(t,e){return function(t,e){var r=null==t?0:t.length;return r?Pn(t,e)/r:NaN}(t,pn(e))}function Mn(t,e){if(t!==e){var r=void 0!==t,n=null===t,o=t==t,i=y(t),s=void 0!==e,a=null===e,u=e==e,c=y(e);if(!a&&!c&&!i&&t>e||i&&s&&u&&!a&&!c||n&&s&&u||!r&&u||!o)return 1;if(!n&&!i&&!c&&t<e||c&&r&&o&&!n&&!i||a&&r&&o||!s&&o||!u)return-1}return 0}function In(t,e,r){e=e.length?_(e,(function(t){return b(t)?function(e){return ce(e,1===t.length?t[0]:t)}:t})):[k];var n=-1;return e=_(e,kt(pn)),function(t,e){var n=t.length;for(t.sort((function(t,e){return function(t,e,r){for(var n=-1,o=t.criteria,i=e.criteria,s=o.length,a=r.length;++n<s;){var u=Mn(o[n],i[n]);if(u)return n>=a?u:u*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,r)}));n--;)t[n]=t[n].value;return t}(_n(t,(function(t,r,o){return{criteria:_(e,(function(e){return e(t)})),index:++n,value:t}})))}function Tn(t,e,r,n){return null==t?[]:(b(e)||(e=null==e?[]:[e]),b(r=n?void 0:r)||(r=null==r?[]:[r]),In(t,e,r))}var Nn=ct((function(t,e){if(null==t)return[];var r=e.length;return r>1&&dt(t,e[0],e[1])?e=[]:r>2&&dt(e[0],e[1],e[2])&&(e=[e[0]]),In(t,de(e,1),[])}));function $n(t,e){return t&&t.length?Pn(t,pn(e)):0}function Wn(t){if(this.words=[],t)if(Symbol&&Symbol.iterator&&void 0!==t[Symbol.iterator]){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.add(r.value),r=e.next()}else for(let e=0;e<t.length;e++)this.add(t[e])}Wn.fromWords=function(t){const e=Object.create(Wn.prototype);return e.words=t,e},Wn.prototype.add=function(t){this.resize(t),this.words[t>>>5]|=1<<t},Wn.prototype.flip=function(t){this.resize(t),this.words[t>>>5]^=1<<t},Wn.prototype.clear=function(){this.words.length=0},Wn.prototype.remove=function(t){this.resize(t),this.words[t>>>5]&=~(1<<t)},Wn.prototype.isEmpty=function(t){const e=this.words.length;for(let t=0;t<e;t++)if(0!==this.words[t])return!1;return!0},Wn.prototype.has=function(t){return 0!=(this.words[t>>>5]&1<<t)},Wn.prototype.checkedAdd=function(t){this.resize(t);const e=this.words[t>>>5],r=e|1<<t;return this.words[t>>>5]=r,(r^e)>>>t},Wn.prototype.trim=function(t){let e=this.words.length;for(;e>0&&0===this.words[e-1];)e--;this.words.length=e},Wn.prototype.resize=function(t){const e=t+32>>>5;for(let t=this.words.length;t<e;t++)this.words[t]=0},Wn.prototype.hammingWeight=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},Wn.prototype.hammingWeight4=function(t,e,r,n){return 16843009*((t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)+(e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)+(r=(r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)+(n=(n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135))>>>24},Wn.prototype.size=function(){let t=0;const e=this.words.length,r=this.words;for(let n=0;n<e;n++)t+=this.hammingWeight(r[n]);return t},Wn.prototype.array=function(){const t=new Array(this.size());let e=0;const r=this.words.length;for(let n=0;n<r;++n){let r=this.words[n];for(;0!=r;){const o=r&-r;t[e++]=(n<<5)+this.hammingWeight(o-1|0),r^=o}}return t},Wn.prototype.forEach=function(t){const e=this.words.length;for(let r=0;r<e;++r){let e=this.words[r];for(;0!=e;){const n=e&-e;t((r<<5)+this.hammingWeight(n-1|0)),e^=n}}},Wn.prototype[Symbol.iterator]=function(){const t=this.words.length;let e=0,r=this.words[e],n=this.hammingWeight,o=this.words;return{[Symbol.iterator](){return this},next(){for(;e<t;){if(0!==r){const t=r&-r,o=(e<<5)+n(t-1|0);return r^=t,{done:!1,value:o}}e++,e<t&&(r=o[e])}return{done:!0,value:void 0}}}},Wn.prototype.clone=function(){const t=Object.create(Wn.prototype);return t.words=this.words.slice(),t},Wn.prototype.intersects=function(t){const e=Math.min(this.words.length,t.words.length);for(let r=0;r<e;++r)if(0!=(this.words[r]&t.words[r]))return!0;return!1},Wn.prototype.intersection=function(t){const e=Math.min(this.words.length,t.words.length);let r=0;for(;r+7<e;r+=8)this.words[r]&=t.words[r],this.words[r+1]&=t.words[r+1],this.words[r+2]&=t.words[r+2],this.words[r+3]&=t.words[r+3],this.words[r+4]&=t.words[r+4],this.words[r+5]&=t.words[r+5],this.words[r+6]&=t.words[r+6],this.words[r+7]&=t.words[r+7];for(;r<e;++r)this.words[r]&=t.words[r];const n=this.words.length;for(r=e;r<n;++r)this.words[r]=0;return this},Wn.prototype.intersection_size=function(t){const e=Math.min(this.words.length,t.words.length);let r=0;for(let n=0;n<e;++n)r+=this.hammingWeight(this.words[n]&t.words[n]);return r},Wn.prototype.new_intersection=function(t){const e=Object.create(Wn.prototype),r=Math.min(this.words.length,t.words.length);e.words=new Array(r);let n=0;for(;n+7<r;n+=8)e.words[n]=this.words[n]&t.words[n],e.words[n+1]=this.words[n+1]&t.words[n+1],e.words[n+2]=this.words[n+2]&t.words[n+2],e.words[n+3]=this.words[n+3]&t.words[n+3],e.words[n+4]=this.words[n+4]&t.words[n+4],e.words[n+5]=this.words[n+5]&t.words[n+5],e.words[n+6]=this.words[n+6]&t.words[n+6],e.words[n+7]=this.words[n+7]&t.words[n+7];for(;n<r;++n)e.words[n]=this.words[n]&t.words[n];return e},Wn.prototype.equals=function(t){const e=Math.min(this.words.length,t.words.length);for(let r=0;r<e;++r)if(this.words[r]!=t.words[r])return!1;if(this.words.length<t.words.length){const e=t.words.length;for(let r=this.words.length;r<e;++r)if(0!=t.words[r])return!1}else if(t.words.length<this.words.length){const e=this.words.length;for(let r=t.words.length;r<e;++r)if(0!=this.words[r])return!1}return!0},Wn.prototype.difference=function(t){const e=Math.min(this.words.length,t.words.length);let r=0;for(;r+7<e;r+=8)this.words[r]&=~t.words[r],this.words[r+1]&=~t.words[r+1],this.words[r+2]&=~t.words[r+2],this.words[r+3]&=~t.words[r+3],this.words[r+4]&=~t.words[r+4],this.words[r+5]&=~t.words[r+5],this.words[r+6]&=~t.words[r+6],this.words[r+7]&=~t.words[r+7];for(;r<e;++r)this.words[r]&=~t.words[r];return this},Wn.prototype.new_difference=function(t){return this.clone().difference(t)},Wn.prototype.difference2=function(t){const e=Math.min(this.words.length,t.words.length);let r=0;for(;r+7<e;r+=8)t.words[r]=this.words[r]&~t.words[r],t.words[r+1]=this.words[r+1]&~t.words[r+1],t.words[r+2]=this.words[r+2]&~t.words[r+2],t.words[r+3]=this.words[r+3]&~t.words[r+3],t.words[r+4]=this.words[r+4]&~t.words[r+4],t.words[r+5]=this.words[r+5]&~t.words[r+5],t.words[r+6]=this.words[r+6]&~t.words[r+6],t.words[r+7]=this.words[r+7]&~t.words[r+7];for(;r<e;++r)t.words[r]=this.words[r]&~t.words[r];for(r=this.words.length-1;r>=e;--r)t.words[r]=this.words[r];return t.words.length=this.words.length,t},Wn.prototype.difference_size=function(t){const e=Math.min(this.words.length,t.words.length);let r=0,n=0;for(;n<e;++n)r+=this.hammingWeight(this.words[n]&~t.words[n]);const o=this.words.length;for(;n<o;++n)r+=this.hammingWeight(this.words[n]);return r},Wn.prototype.change=function(t){const e=Math.min(this.words.length,t.words.length);let r=0;for(;r+7<e;r+=8)this.words[r]^=t.words[r],this.words[r+1]^=t.words[r+1],this.words[r+2]^=t.words[r+2],this.words[r+3]^=t.words[r+3],this.words[r+4]^=t.words[r+4],this.words[r+5]^=t.words[r+5],this.words[r+6]^=t.words[r+6],this.words[r+7]^=t.words[r+7];for(;r<e;++r)this.words[r]^=t.words[r];for(r=t.words.length-1;r>=e;--r)this.words[r]=t.words[r];return this},Wn.prototype.new_change=function(t){const e=Object.create(Wn.prototype),r=Math.max(this.words.length,t.words.length);e.words=new Array(r);const n=Math.min(this.words.length,t.words.length);let o=0;for(;o+7<n;o+=8)e.words[o]=this.words[o]^t.words[o],e.words[o+1]=this.words[o+1]^t.words[o+1],e.words[o+2]=this.words[o+2]^t.words[o+2],e.words[o+3]=this.words[o+3]^t.words[o+3],e.words[o+4]=this.words[o+4]^t.words[o+4],e.words[o+5]=this.words[o+5]^t.words[o+5],e.words[o+6]=this.words[o+6]^t.words[o+6],e.words[o+7]=this.words[o+7]^t.words[o+7];for(;o<n;++o)e.words[o]=this.words[o]^t.words[o];const i=this.words.length;for(o=n;o<i;++o)e.words[o]=this.words[o];const s=t.words.length;for(o=n;o<s;++o)e.words[o]=t.words[o];return e},Wn.prototype.change_size=function(t){const e=Math.min(this.words.length,t.words.length);let r=0,n=0;for(;n<e;++n)r+=this.hammingWeight(this.words[n]^t.words[n]);const o=this.words.length>t.words.length?this:t,i=o.words.length;for(;n<i;++n)r+=this.hammingWeight(o.words[n]);return r},Wn.prototype.toString=function(){return"{"+this.array().join(",")+"}"},Wn.prototype.union=function(t){const e=Math.min(this.words.length,t.words.length);let r=0;for(;r+7<e;r+=8)this.words[r]|=t.words[r],this.words[r+1]|=t.words[r+1],this.words[r+2]|=t.words[r+2],this.words[r+3]|=t.words[r+3],this.words[r+4]|=t.words[r+4],this.words[r+5]|=t.words[r+5],this.words[r+6]|=t.words[r+6],this.words[r+7]|=t.words[r+7];for(;r<e;++r)this.words[r]|=t.words[r];if(this.words.length<t.words.length){this.resize((t.words.length<<5)-1);const r=t.words.length;for(let n=e;n<r;++n)this.words[n]=t.words[n]}return this},Wn.prototype.new_union=function(t){const e=Object.create(Wn.prototype),r=Math.max(this.words.length,t.words.length);e.words=new Array(r);const n=Math.min(this.words.length,t.words.length);let o=0;for(;o+7<n;o+=8)e.words[o]=this.words[o]|t.words[o],e.words[o+1]=this.words[o+1]|t.words[o+1],e.words[o+2]=this.words[o+2]|t.words[o+2],e.words[o+3]=this.words[o+3]|t.words[o+3],e.words[o+4]=this.words[o+4]|t.words[o+4],e.words[o+5]=this.words[o+5]|t.words[o+5],e.words[o+6]=this.words[o+6]|t.words[o+6],e.words[o+7]=this.words[o+7]|t.words[o+7];for(;o<n;++o)e.words[o]=this.words[o]|t.words[o];const i=this.words.length;for(o=n;o<i;++o)e.words[o]=this.words[o];const s=t.words.length;for(o=n;o<s;++o)e.words[o]=t.words[o];return e},Wn.prototype.union_size=function(t){const e=Math.min(this.words.length,t.words.length);let r=0;for(let n=0;n<e;++n)r+=this.hammingWeight(this.words[n]|t.words[n]);if(this.words.length<t.words.length){const e=t.words.length;for(let n=this.words.length;n<e;++n)r+=this.hammingWeight(0|t.words[n])}else{const e=this.words.length;for(let n=t.words.length;n<e;++n)r+=this.hammingWeight(0|this.words[n])}return r};var Cn=Wn;function Dn(){return Dn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dn.apply(this,arguments)}function Rn(t,e){var r=[];return t.forEach((function(t){e.forEach((function(e){r.push(t.concat(e))}))})),r}function Vn(t){return!!~t.search(/\(|\)/)}function qn(t,e){for(var r=e.split(" "+t+" "),n=[],o=[],i=0;i<r.length;i++)if(Vn(r[i])||o.length>0){o.push(r[i]);var s=""+o;(s.match(/\(/g)||[]).length===(s.match(/\)/g)||[]).length&&(n.push(o.join(" "+t+" ")),o=[])}else n.push(r[i]);return n}var Un=function t(e){return function(t){for(var e=t[0],r=1;r<t.length;r++)e=e.concat(t[r]);return e}(qn("OR",(r=e=function(t){if("("===t.charAt(0))for(var e=0,r=0;r<t.length;r++)if("("===t.charAt(r)?e++:")"===t.charAt(r)&&e--,0===e)return r!==t.length-1?t:t.substring(1,t.length-1);return t}(e),e=r.replace(/[\s]+/g," "))).map((function(e){for(var r=qn("AND",e),n=[],o=[],i=0;i<r.length;i++)Vn(r[i])?n.push(t(r[i])):o.push(r[i]);return n.push([o]),function(t){for(var e=[[]],r=0;r<t.length;r++)e=Rn(e,t[r]);return e}(n)})));var r},Ln=function(t){try{return structuredClone(t)}catch(e){try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}},Bn=function(t,e){var r=new Cn([]),n=0;return An(e,(function(e,o){e.forEach((function(e){++n,r=r.new_union(t[o][e]||new Cn([]))}))})),0===n?null:r},Jn=function(t,e,r){var n=1;return An(t.bits_data_temp,(function(t,o){var i,s,a,u,c,f,l;r[o]&&(i=r[o].order,s=r[o].sort,a=r[o].size,u=r[o].title,c=r[o].show_facet_stats||!1,f=!1!==r[o].chosen_filters_on_top,l=r[o].hide_zero_doc_count||!1);var h,d,p,g,w,v,y=Object.entries(t).map((function(t){var r=[];e&&e.filters&&e.filters[o]&&(r=e.filters[o]);var n=t[1].array().length;if(!l||0!==n||-1!==r.indexOf(t[0]))return{key:t[0],doc_count:n,selected:-1!==r.indexOf(t[0])}})).filter(Boolean);return b(s)?(h=s||["key"],d=i||["asc"]):("term"===s||"key"===s?(h=["key"],d=[i||"asc"]):(h=["doc_count","key"],d=[i||"desc","asc"]),f&&(h.unshift("selected"),d.unshift("desc"))),y=(y=Tn(y,h,d)).slice(0,a||10),c&&(p=[],Object.entries(t).forEach((function(t){if(isNaN(t[0]))throw new Error("You cant use chars to calculate the facet_stats.");t[1].array().length>0&&t[1].forEach((function(){p.push(parseInt(t[0]))}))})),g={min:(w=p,w&&w.length?En(w,pn(void 0),kn):void 0),max:zn(p),avg:Fn(p),sum:$n(p)}),Dn({name:o,title:u||(v=o,v.replace(/^[\s_]+|[\s_]+$/g,"").replace(/[_\s]+/g," ").replace(/^[a-z]/,(function(t){return t.toUpperCase()}))),position:n++,buckets:y},c&&{facet_stats:g})}))};function Hn(t,e,r,n,o){e=e||Object.create(null);var i=parseInt(e.per_page||12),s=parseInt(e.page||1),a=e.is_all_filtered_items||!1;if(!1===r.native_search_enabled&&(e.query||e.filter))throw new Error('"query" and "filter" options are not working once native search is disabled');var u,c,f,l=0,h=(new Date).getTime(),d=o.bits_ids();if(e._ids)u=new Cn(e._ids),c=e._ids;else if(e.ids)c=o.internal_ids_from_ids_map(e.ids),u=new Cn(c);else if(n&&(e.query||e.filter)){var p=(new Date).getTime();c=n.search(e.query,e.filter),l=(new Date).getTime()-p,u=new Cn(c)}var g=(new Date).getTime(),w=o.search(e,{query_ids:u});g=(new Date).getTime()-g,u&&(d=u),w.ids&&(d=d.new_intersection(w.ids)),w.not_ids&&(d=d.new_difference(w.not_ids));var v,y=d.array(),_=y.map((function(t){return o.get_item(t)})),b=!1,m=(new Date).getTime();e.sort?_=function(t,e,r){return r&&r[e]&&(e=r[e]),e.field?Tn(t,e.field,e.order||"asc"):t}(_,e.sort,r.sortings):c&&(_=(y=c.filter((function(t){return d.has(t)}))).slice((s-1)*i,s*i).map((function(t){return o.get_item(t)})),b=!0),b||(f=a?_:null,_=_.slice((s-1)*i,s*i)),v=(new Date).getTime()-m;var j=(new Date).getTime()-h;return{pagination:{per_page:i,page:s,total:y.length},timings:{total:j,facets:g,search:l,sorting:v},data:{items:_,allFilteredItems:f,aggregations:Jn(w,e,r.aggregations)}}}var Gn=function(t){var e={exports:{}};return function(t,e){!function(){var e,r,n,o,i,s,a,u,c,f,l,h,d,p,g,w,v,y,_,b,m,j,O,S,x,k,A,E,z=function(t){var e=new z.Index;return e.pipeline.add(z.trimmer,z.stopWordFilter,z.stemmer),t&&t.call(e,e),e};z.version="1.0.0",z.utils={},z.utils.warn=function(t){return function(e){t.console&&console.warn&&console.warn(e)}}(this),z.utils.asString=function(t){return null==t?"":t.toString()},z.EventEmitter=function(){this.events={}},z.EventEmitter.prototype.addListener=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),r=t;if("function"!=typeof e)throw new TypeError("last argument must be a function");r.forEach((function(t){this.hasHandler(t)||(this.events[t]=[]),this.events[t].push(e)}),this)},z.EventEmitter.prototype.removeListener=function(t,e){if(this.hasHandler(t)){var r=this.events[t].indexOf(e);this.events[t].splice(r,1),this.events[t].length||delete this.events[t]}},z.EventEmitter.prototype.emit=function(t){if(this.hasHandler(t)){var e=Array.prototype.slice.call(arguments,1);this.events[t].forEach((function(t){t.apply(void 0,e)}))}},z.EventEmitter.prototype.hasHandler=function(t){return t in this.events},z.tokenizer=function(t){return arguments.length&&null!=t&&null!=t?Array.isArray(t)?t.map((function(t){return z.utils.asString(t).toLowerCase()})):t.toString().trim().toLowerCase().split(z.tokenizer.separator):[]},z.tokenizer.separator=/[\s\-]+/,z.tokenizer.load=function(t){var e=this.registeredFunctions[t];if(!e)throw new Error("Cannot load un-registered function: "+t);return e},z.tokenizer.label="default",z.tokenizer.registeredFunctions={default:z.tokenizer},z.tokenizer.registerFunction=function(t,e){e in this.registeredFunctions&&z.utils.warn("Overwriting existing tokenizer: "+e),t.label=e,this.registeredFunctions[e]=t},z.Pipeline=function(){this._stack=[]},z.Pipeline.registeredFunctions={},z.Pipeline.registerFunction=function(t,e){e in this.registeredFunctions&&z.utils.warn("Overwriting existing registered function: "+e),t.label=e,z.Pipeline.registeredFunctions[t.label]=t},z.Pipeline.warnIfFunctionNotRegistered=function(t){t.label&&t.label in this.registeredFunctions||z.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},z.Pipeline.load=function(t){var e=new z.Pipeline;return t.forEach((function(t){var r=z.Pipeline.registeredFunctions[t];if(!r)throw new Error("Cannot load un-registered function: "+t);e.add(r)})),e},z.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach((function(t){z.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)}),this)},z.Pipeline.prototype.after=function(t,e){z.Pipeline.warnIfFunctionNotRegistered(e);var r=this._stack.indexOf(t);if(-1==r)throw new Error("Cannot find existingFn");this._stack.splice(r+=1,0,e)},z.Pipeline.prototype.before=function(t,e){z.Pipeline.warnIfFunctionNotRegistered(e);var r=this._stack.indexOf(t);if(-1==r)throw new Error("Cannot find existingFn");this._stack.splice(r,0,e)},z.Pipeline.prototype.remove=function(t){var e=this._stack.indexOf(t);-1!=e&&this._stack.splice(e,1)},z.Pipeline.prototype.run=function(t){for(var e=[],r=t.length,n=this._stack.length,o=0;o<r;o++){for(var i=t[o],s=0;s<n&&void 0!==(i=this._stack[s](i,o,t))&&""!==i;s++);void 0!==i&&""!==i&&e.push(i)}return e},z.Pipeline.prototype.reset=function(){this._stack=[]},z.Pipeline.prototype.toJSON=function(){return this._stack.map((function(t){return z.Pipeline.warnIfFunctionNotRegistered(t),t.label}))},z.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},z.Vector.Node=function(t,e,r){this.idx=t,this.val=e,this.next=r},z.Vector.prototype.insert=function(t,e){this._magnitude=void 0;var r=this.list;if(!r)return this.list=new z.Vector.Node(t,e,r),this.length++;if(t<r.idx)return this.list=new z.Vector.Node(t,e,r),this.length++;for(var n=r,o=r.next;null!=o;){if(t<o.idx)return n.next=new z.Vector.Node(t,e,o),this.length++;n=o,o=o.next}return n.next=new z.Vector.Node(t,e,o),this.length++},z.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var t,e=this.list,r=0;e;)r+=(t=e.val)*t,e=e.next;return this._magnitude=Math.sqrt(r)},z.Vector.prototype.dot=function(t){for(var e=this.list,r=t.list,n=0;e&&r;)e.idx<r.idx?e=e.next:(e.idx>r.idx||(n+=e.val*r.val,e=e.next),r=r.next);return n},z.Vector.prototype.similarity=function(t){return this.dot(t)/(this.magnitude()*t.magnitude())},z.SortedSet=function(){this.length=0,this.elements=[]},z.SortedSet.load=function(t){var e=new this;return e.elements=t,e.length=t.length,e},z.SortedSet.prototype.add=function(){var t,e;for(t=0;t<arguments.length;t++)~this.indexOf(e=arguments[t])||this.elements.splice(this.locationFor(e),0,e);this.length=this.elements.length},z.SortedSet.prototype.toArray=function(){return this.elements.slice()},z.SortedSet.prototype.map=function(t,e){return this.elements.map(t,e)},z.SortedSet.prototype.forEach=function(t,e){return this.elements.forEach(t,e)},z.SortedSet.prototype.indexOf=function(t){for(var e=0,r=this.elements.length,n=r-e,o=e+Math.floor(n/2),i=this.elements[o];n>1;){if(i===t)return o;i<t&&(e=o),i>t&&(r=o),n=r-e,o=e+Math.floor(n/2),i=this.elements[o]}return i===t?o:-1},z.SortedSet.prototype.locationFor=function(t){for(var e=0,r=this.elements.length,n=r-e,o=e+Math.floor(n/2),i=this.elements[o];n>1;)i<t&&(e=o),i>t&&(r=o),n=r-e,o=e+Math.floor(n/2),i=this.elements[o];return i>t?o:i<t?o+1:void 0},z.SortedSet.prototype.intersect=function(t){for(var e=new z.SortedSet,r=0,n=0,o=this.length,i=t.length,s=this.elements,a=t.elements;!(r>o-1||n>i-1);)s[r]!==a[n]?s[r]<a[n]?r++:s[r]>a[n]&&n++:(e.add(s[r]),r++,n++);return e},z.SortedSet.prototype.clone=function(){var t=new z.SortedSet;return t.elements=this.toArray(),t.length=t.elements.length,t},z.SortedSet.prototype.union=function(t){var e,r,n;this.length>=t.length?(e=this,r=t):(e=t,r=this),n=e.clone();for(var o=0,i=r.toArray();o<i.length;o++)n.add(i[o]);return n},z.SortedSet.prototype.toJSON=function(){return this.toArray()},z.Index=function(){this._fields=[],this._ref="id",this.pipeline=new z.Pipeline,this.documentStore=new z.Store,this.tokenStore=new z.TokenStore,this.corpusTokens=new z.SortedSet,this.eventEmitter=new z.EventEmitter,this.tokenizerFn=z.tokenizer,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},z.Index.prototype.on=function(){var t=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,t)},z.Index.prototype.off=function(t,e){return this.eventEmitter.removeListener(t,e)},z.Index.load=function(t){t.version!==z.version&&z.utils.warn("version mismatch: current "+z.version+" importing "+t.version);var e=new this;return e._fields=t.fields,e._ref=t.ref,e.tokenizer(z.tokenizer.load(t.tokenizer)),e.documentStore=z.Store.load(t.documentStore),e.tokenStore=z.TokenStore.load(t.tokenStore),e.corpusTokens=z.SortedSet.load(t.corpusTokens),e.pipeline=z.Pipeline.load(t.pipeline),e},z.Index.prototype.field=function(t,e){return this._fields.push({name:t,boost:(e=e||{}).boost||1}),this},z.Index.prototype.ref=function(t){return this._ref=t,this},z.Index.prototype.tokenizer=function(t){return t.label&&t.label in z.tokenizer.registeredFunctions||z.utils.warn("Function is not a registered tokenizer. This may cause problems when serialising the index"),this.tokenizerFn=t,this},z.Index.prototype.add=function(t,e){var r={},n=new z.SortedSet,o=t[this._ref];e=void 0===e||e,this._fields.forEach((function(e){var o=this.pipeline.run(this.tokenizerFn(t[e.name]));r[e.name]=o;for(var i=0;i<o.length;i++){var s=o[i];n.add(s),this.corpusTokens.add(s)}}),this),this.documentStore.set(o,n);for(var i=0;i<n.length;i++){for(var s=n.elements[i],a=0,u=0;u<this._fields.length;u++){var c=this._fields[u],f=r[c.name],l=f.length;if(l){for(var h=0,d=0;d<l;d++)f[d]===s&&h++;a+=h/l*c.boost}}this.tokenStore.add(s,{ref:o,tf:a})}e&&this.eventEmitter.emit("add",t,this)},z.Index.prototype.remove=function(t,e){var r=t[this._ref];if(e=void 0===e||e,this.documentStore.has(r)){var n=this.documentStore.get(r);this.documentStore.remove(r),n.forEach((function(t){this.tokenStore.remove(t,r)}),this),e&&this.eventEmitter.emit("remove",t,this)}},z.Index.prototype.update=function(t,e){e=void 0===e||e,this.remove(t,!1),this.add(t,!1),e&&this.eventEmitter.emit("update",t,this)},z.Index.prototype.idf=function(t){var e="@"+t;if(Object.prototype.hasOwnProperty.call(this._idfCache,e))return this._idfCache[e];var r=this.tokenStore.count(t),n=1;return r>0&&(n=1+Math.log(this.documentStore.length/r)),this._idfCache[e]=n},z.Index.prototype.search=function(t){var e=this.pipeline.run(this.tokenizerFn(t)),r=new z.Vector,n=[],o=this._fields.reduce((function(t,e){return t+e.boost}),0);return e.some((function(t){return this.tokenStore.has(t)}),this)?(e.forEach((function(t,e,i){var s=1/i.length*this._fields.length*o,a=this,u=this.tokenStore.expand(t).reduce((function(e,n){var o=a.corpusTokens.indexOf(n),i=a.idf(n),u=1,c=new z.SortedSet;if(n!==t){var f=Math.max(3,n.length-t.length);u=1/Math.log(f)}o>-1&&r.insert(o,s*i*u);for(var l=a.tokenStore.get(n),h=Object.keys(l),d=h.length,p=0;p<d;p++)c.add(l[h[p]].ref);return e.union(c)}),new z.SortedSet);n.push(u)}),this),n.reduce((function(t,e){return t.intersect(e)})).map((function(t){return{ref:t,score:r.similarity(this.documentVector(t))}}),this).sort((function(t,e){return e.score-t.score}))):[]},z.Index.prototype.documentVector=function(t){for(var e=this.documentStore.get(t),r=e.length,n=new z.Vector,o=0;o<r;o++){var i=e.elements[o],s=this.tokenStore.get(i)[t].tf,a=this.idf(i);n.insert(this.corpusTokens.indexOf(i),s*a)}return n},z.Index.prototype.toJSON=function(){return{version:z.version,fields:this._fields,ref:this._ref,tokenizer:this.tokenizerFn.label,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},z.Index.prototype.use=function(t){var e=Array.prototype.slice.call(arguments,1);e.unshift(this),t.apply(this,e)},z.Store=function(){this.store={},this.length=0},z.Store.load=function(t){var e=new this;return e.length=t.length,e.store=Object.keys(t.store).reduce((function(e,r){return e[r]=z.SortedSet.load(t.store[r]),e}),{}),e},z.Store.prototype.set=function(t,e){this.has(t)||this.length++,this.store[t]=e},z.Store.prototype.get=function(t){return this.store[t]},z.Store.prototype.has=function(t){return t in this.store},z.Store.prototype.remove=function(t){this.has(t)&&(delete this.store[t],this.length--)},z.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},z.stemmer=(e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},r={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},s="^("+(o="[^aeiou][^aeiouy]*")+")?"+(i=(n="[aeiouy]")+"[aeiou]*")+o+"("+i+")?$",a="^("+o+")?"+i+o+i+o,u="^("+o+")?"+n,c=new RegExp("^("+o+")?"+i+o),f=new RegExp(a),l=new RegExp(s),h=new RegExp(u),d=/^(.+?)(ss|i)es$/,p=/^(.+?)([^s])s$/,g=/^(.+?)eed$/,w=/^(.+?)(ed|ing)$/,v=/.$/,y=/(at|bl|iz)$/,_=new RegExp("([^aeiouylsz])\\1$"),b=new RegExp("^"+o+n+"[^aeiouwxy]$"),m=/^(.+?[^aeiou])y$/,j=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,O=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,S=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,x=/^(.+?)(s|t)(ion)$/,k=/^(.+?)e$/,A=/ll$/,E=new RegExp("^"+o+n+"[^aeiouwxy]$"),function(t){var n,o,i,s,a,u,z;if(t.length<3)return t;if("y"==(i=t.substr(0,1))&&(t=i.toUpperCase()+t.substr(1)),a=p,(s=d).test(t)?t=t.replace(s,"$1$2"):a.test(t)&&(t=t.replace(a,"$1$2")),a=w,(s=g).test(t)){var P=s.exec(t);(s=c).test(P[1])&&(t=t.replace(s=v,""))}else a.test(t)&&(P=a.exec(t),(a=h).test(n=P[1])&&(u=_,z=b,(a=y).test(t=n)?t+="e":u.test(t)?t=t.replace(s=v,""):z.test(t)&&(t+="e")));return(s=m).test(t)&&(t=(n=(P=s.exec(t))[1])+"i"),(s=j).test(t)&&(o=(P=s.exec(t))[2],(s=c).test(n=P[1])&&(t=n+e[o])),(s=O).test(t)&&(o=(P=s.exec(t))[2],(s=c).test(n=P[1])&&(t=n+r[o])),a=x,(s=S).test(t)?(P=s.exec(t),(s=f).test(n=P[1])&&(t=n)):a.test(t)&&(P=a.exec(t),(a=f).test(n=P[1]+P[2])&&(t=n)),(s=k).test(t)&&(P=s.exec(t),a=l,u=E,((s=f).test(n=P[1])||a.test(n)&&!u.test(n))&&(t=n)),a=f,(s=A).test(t)&&a.test(t)&&(t=t.replace(s=v,"")),"y"==i&&(t=i.toLowerCase()+t.substr(1)),t}),z.Pipeline.registerFunction(z.stemmer,"stemmer"),z.generateStopWordFilter=function(t){var e=t.reduce((function(t,e){return t[e]=e,t}),{});return function(t){if(t&&e[t]!==t)return t}},z.stopWordFilter=z.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),z.Pipeline.registerFunction(z.stopWordFilter,"stopWordFilter"),z.trimmer=function(t){return t.replace(/^\W+/,"").replace(/\W+$/,"")},z.Pipeline.registerFunction(z.trimmer,"trimmer"),z.TokenStore=function(){this.root={docs:{}},this.length=0},z.TokenStore.load=function(t){var e=new this;return e.root=t.root,e.length=t.length,e},z.TokenStore.prototype.add=function(t,e,r){r=r||this.root;var n=t.charAt(0),o=t.slice(1);return n in r||(r[n]={docs:{}}),0===o.length?(r[n].docs[e.ref]=e,void(this.length+=1)):this.add(o,e,r[n])},z.TokenStore.prototype.has=function(t){if(!t)return!1;for(var e=this.root,r=0;r<t.length;r++){if(!e[t.charAt(r)])return!1;e=e[t.charAt(r)]}return!0},z.TokenStore.prototype.getNode=function(t){if(!t)return{};for(var e=this.root,r=0;r<t.length;r++){if(!e[t.charAt(r)])return{};e=e[t.charAt(r)]}return e},z.TokenStore.prototype.get=function(t,e){return this.getNode(t,e).docs||{}},z.TokenStore.prototype.count=function(t,e){return Object.keys(this.get(t,e)).length},z.TokenStore.prototype.remove=function(t,e){if(t){for(var r=this.root,n=0;n<t.length;n++){if(!(t.charAt(n)in r))return;r=r[t.charAt(n)]}delete r.docs[e]}},z.TokenStore.prototype.expand=function(t,e){var r=this.getNode(t);return e=e||[],Object.keys(r.docs||{}).length&&e.push(t),Object.keys(r).forEach((function(r){"docs"!==r&&e.concat(this.expand(t+r,e))}),this),e},z.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},t.exports=z}()}(e),e.exports}(),Yn=function(){function t(t,e){var r=this;(e=e||Object.create(null)).searchableFields=e.searchableFields||[],this.items=t,this.idx=Gn((function(){this.field("name",{boost:10});var t,r,n=this;(b(t=e.searchableFields)?Q:yn)(t,"function"==typeof(r=function(t){n.field(t)})?r:k),this.ref("_id"),e.isExactSearch&&(this.pipeline.remove(Gn.stemmer),this.pipeline.remove(Gn.stopWordFilter)),e.removeStopWordFilter&&this.pipeline.remove(Gn.stopWordFilter)}));var n,o,i,s=1;bn(t,(function(t){t._id=s,++s,r.idx.add(t)})),this.store=(n=t,i={},o=pn(o=function(t){return t._id}),wn(n,(function(t,e,r){nt(i,o(t,e,r),t)})),i)}var e=t.prototype;return e.search_full=function(t,e){var r=this;return this.search(t,e).map((function(t){return r.store[t]}))},e.search=function(t,e){var r,n=this;return t||e?(t&&(r=bn(this.idx.search(t),(function(t){return n.store[t.ref]}))),e instanceof Function&&(r=(r||this.items).filter(e)),r.map((function(t){return t._id}))):this.items?this.items.map((function(t){return t._id})):[]},t}(),Kn=function(){function t(t,e){var r=this;(e=e||Object.create(null)).aggregations=e.aggregations||Object.create(null),this._items=t,this.config=e.aggregations,this.facets=function(t,e){e=e||[];var r={data:Object.create(null),bits_data:Object.create(null),bits_data_temp:Object.create(null)},n=1;return t&&t.map((function(t){return t._id||(t._id=n,++n),t})),t&&t.map((function(t){return e.forEach((function(e){if(t)if(r.data[e]||(r.data[e]=Object.create(null)),Array.isArray(t[e]))t[e].forEach((function(n){t[e]&&(r.data[e][n]||(r.data[e][n]=[]),r.data[e][n].push(parseInt(t._id)))}));else if(void 0!==t[e]){var n=t[e];r.data[e][n]||(r.data[e][n]=[]),r.data[e][n].push(parseInt(t._id))}})),t})),r.data=An(r.data,(function(t,e){return r.bits_data[e]||(r.bits_data[e]=Object.create(null),r.bits_data_temp[e]=Object.create(null)),An(t,(function(t,n){var o=Nn(t);return r.bits_data[e][n]=new Cn(o),o}))})),r}(t,Ct(e.aggregations)),this._items_map=Object.create(null),this._ids=[];var n=1;bn(t,(function(t){r._ids.push(n),r._items_map[n]=t,t._id=n,++n})),this.ids_map=Object.create(null),t&&t.forEach((function(t){var n=e.custom_id_field||"id";t[n]&&t._id&&(r.ids_map[t[n]]=t._id)})),this._bits_ids=new Cn(this._ids)}var e=t.prototype;return e.items=function(){return this._items},e.bits_ids=function(t){return t?new Cn(t):this._bits_ids},e.internal_ids_from_ids_map=function(t){var e=this;return t.map((function(t){return e.ids_map[t]}))},e.index=function(){return this.facets},e.get_item=function(t){return this._items_map[t]},e.search=function(t,e){var r=this.config;e=e||Object.create(null);var n,o=Er(this.facets);o.not_ids=Bn(o.bits_data,t.not_filters);var i,s,a=function(t,e){var r=[];return An(t.filters,(function(t,n){if(t&&t.length)if(!1!==e[n].conjunction)An(t,(function(t){r.push([n,t])}));else{var o=[];An(t,(function(t){o.push([n,t])})),r.push(o)}})),An(t.not_filters,(function(t,e){t&&t.length&&An(t,(function(t){r.push([e,"-",t])}))})),r}(t,r);return n=function(t,e){var r,n=Er(t);e=e||[],An(n.bits_data,(function(t,e){An(n.bits_data[e],(function(t,r){n.bits_data_temp[e][r]=n.bits_data[e][r]}))})),n.is_temp_copied=!0;var o=function(t,e){var r=Object.create(null);return An(e,(function(e){if(Array.isArray(e[0])){var n=new Cn([]),o=[];An(e,(function(e){var i=e[0],s=e[1];o.push(i),n=n.new_union(t.bits_data[i][s]||new Cn([])),r[i]=n}))}})),r}(t,e);return An(e,(function(t){if(!Array.isArray(t[0])){var e=t[0],o=t[1];r=r&&n.bits_data_temp[e][o]?n.bits_data_temp[e][o].new_intersection(r):r&&!n.bits_data_temp[e][o]?new Cn([]):n.bits_data_temp[e][o]}})),r&&An(n.bits_data_temp,(function(t,e){An(n.bits_data_temp[e],(function(t,o){n.bits_data_temp[e][o]=n.bits_data_temp[e][o].new_intersection(r)}))})),An(e,(function(t){if(3===t.length&&"-"===t[1]){var e=n.bits_data_temp[t[0]][t[2]].clone();An(n.bits_data_temp,(function(t,r){An(n.bits_data_temp[r],(function(t,o){n.bits_data_temp[r][o]=n.bits_data_temp[r][o].new_difference(e)}))}))}})),An(n.bits_data_temp,(function(t,e){An(n.bits_data_temp[e],(function(t,r){An(o,(function(t,o){o!==e&&(n.bits_data_temp[e][r]=n.bits_data_temp[e][r].new_intersection(t))}))}))})),n}(this.facets,a),t.filters_query&&(n=function(t,e){var r=Er(t);r.is_temp_copied||An(r.bits_data,(function(t,e){An(r.bits_data[e],(function(t,n){r.bits_data_temp[e][n]=r.bits_data[e][n]}))}));var n=null;return An(e,(function(t){var e=null;An(t,(function(t){var n=t[0],o=t[1];if(!r.bits_data_temp[n])throw new Error("Panic. The key does not exist in facets lists.");e=e&&r.bits_data_temp[n][o]?r.bits_data_temp[n][o].new_intersection(e):e&&!r.bits_data_temp[n][o]?new Cn([]):r.bits_data_temp[n][o]})),n=(n||new Cn([])).new_union(e||new Cn([]))})),null!==n&&An(r.bits_data_temp,(function(t,e){An(r.bits_data_temp[e],(function(t,o){r.bits_data_temp[e][o]=r.bits_data_temp[e][o].new_intersection(n)}))})),r}(n,Un(t.filters_query).map((function(t){return Array.isArray(t)?t.map((function(t){return Array.isArray(t)?t.map((function(t){return t})):t.split(":")})):t.split(":")})))),o.bits_data_temp=n.bits_data_temp,An(o.bits_data_temp,(function(t,r){An(o.bits_data_temp[r],(function(t,n){e.query_ids&&(o.bits_data_temp[r][n]=e.query_ids.new_intersection(o.bits_data_temp[r][n])),e.test&&(o.data[r][n]=o.bits_data_temp[r][n].array())}))})),o.ids=t.filters_query?(i=o.bits_data_temp,s=new Cn([]),An(i,(function(t,e){An(i[e],(function(t,r){s=s.new_union(i[e][r])}))})),s):Bn(o.bits_data_temp,t.filters),o},t}();t.exports=function(t,e){var r;!1!==(e=e||Object.create(null)).native_search_enabled&&(r=new Yn(t,e));var n=new Kn(t,e);return{search:function(t){return(t=t||Object.create(null)).aggregations=function(t,e){return An(Ln(t),(function(t,r){t.field||(t.field=r);var n=[];e.filters&&e.filters[r]&&(n=e.filters[r]),t.filters=n;var o=[];return e.not_filters&&e.not_filters[r]&&(o=e.not_filters[r]),e.exclude_filters&&e.exclude_filters[r]&&(o=e.exclude_filters[r]),t.not_filters=o,t}))}(e.aggregations,t),Hn(0,t,e,r,n)},similar:function(e,r){return function(t,e,r){for(var n,o=r.per_page||10,i=r.minimum||0,s=r.page||1,a=0;a<t.length;++a)if(t[a].id==e){n=t[a];break}if(!r.field)throw new Error("Please define field in options");for(var u=r.field,c=[],f=0;f<t.length;++f)if(t[f].id!==e){var l=xn(n[u],t[f][u]);l.length>=i&&(c.push(t[f]),c[c.length-1].intersection_length=l.length)}return{pagination:{per_page:o,page:s,total:(c=Tn(c,["intersection_length"],["desc"])).length},data:{items:c.slice((s-1)*o,s*o)}}}(t,e,r)},aggregation:function(t){return function(t,e,r,n,o){var i=e.per_page||10,s=e.page||1;if(e.name&&(!r.aggregations||!r.aggregations[e.name]))throw new Error('Please define aggregation "'.concat(e.name,'" in config'));var a=Ln(e);if(a.page=1,a.per_page=0,!e.name)throw new Error("field name is required");r.aggregations[e.name].size=1e4;var u=Hn(0,a,r,n,o).data.aggregations[e.name].buckets;return{pagination:{per_page:i,page:s,total:u.length},data:{buckets:u.slice((s-1)*i,s*i)}}}(0,t,e,r,n)},reindex:function(o){r=new Yn(t=o,e),n=new Kn(t,e)}}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n](i,i.exports,r),i.loaded=!0,i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var n={};return(()=>{"use strict";var t=n;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createIndex",{enumerable:!0,get:function(){return e.createIndex}}),Object.defineProperty(t,"getSearchClient",{enumerable:!0,get:function(){return e.getSearchClient}});var e=r(947)})(),n})()));